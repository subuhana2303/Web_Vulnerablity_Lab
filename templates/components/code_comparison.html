<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-code me-2"></i>Code Comparison
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-danger">Vulnerable Code:</h6>
                        <pre><code class="language-python"># Vulnerable: String concatenation
username = request.form.get('username', '')
query = f"SELECT * FROM user WHERE username = '{username}'"

# Direct execution without sanitization
result = db.session.execute(text(query))
users = [dict(row._mapping) for row in result]</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Secure Code:</h6>
                        <pre><code class="language-python"># Secure: Parameterized query
username = request.form.get('username', '')
query = "SELECT * FROM user WHERE username = :username"

# Safe execution with parameters
result = db.session.execute(text(query), {'username': username})
users = [dict(row._mapping) for row in result]</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-shield-alt me-2"></i>Prevention Best Practices
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Input Validation:</h6>
                        <ul>
                            <li>Use parameterized queries/prepared statements</li>
                            <li>Validate input data types and ranges</li>
                            <li>Implement whitelist validation where possible</li>
                            <li>Escape special characters properly</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>Database Security:</h6>
                        <ul>
                            <li>Use least privilege principle for database accounts</li>
                            <li>Disable dangerous database features if not needed</li>
                            <li>Keep database software updated</li>
                            <li>Monitor and log database access</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
